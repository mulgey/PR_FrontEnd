<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ProspecTurk Renal</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="css/style.css" rel="stylesheet">
  <!-- MDBootstrap Datatables  -->
  <link href="css/addons/datatables.min.css" rel="stylesheet"> 
  <!-- faviconit.favicons -->
  <link rel="shortcut icon" href="img/favicons/favicon.ico">
  <link rel="icon" sizes="16x16 32x32 64x64" href="img/favicons/favicon.ico">
  <link rel="icon" type="image/png" sizes="196x196" href="img/favicons/favicon-192.png">
  <link rel="icon" type="image/png" sizes="160x160" href="img/favicons/favicon-160.png">
  <link rel="icon" type="image/png" sizes="96x96" href="img/favicons/favicon-96.png">
  <link rel="icon" type="image/png" sizes="64x64" href="img/favicons/favicon-64.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16.png">
  <link rel="apple-touch-icon" href="img/favicons/favicon-57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="img/favicons/favicon-114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="img/favicons/favicon-72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="img/favicons/favicon-144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="img/favicons/favicon-60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="img/favicons/favicon-120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="img/favicons/favicon-76.png">	
  <link rel="apple-touch-icon" sizes="152x152" href="img/favicons/favicon-152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/favicon-180.png">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="img/favicons/favicon-144.png">	
  <meta name="msapplication-config" content="img/favicons/browserconfig.xml">
  <!-- faviconit.favicons -->
</head>

<body>
  <!-- Start your project here-->
  <header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark default-color fixed-top scrolling-navbar">
      <div class="container">
        <a class="navbar-brand" href="index.html"><strong>PR</strong></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-7" aria-controls="navbarSupportedContent-7" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent-7">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Ana Sayfa<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="calculator.html">Hesaplayıcı</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="data_table.html">Veri Tablosu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">Hakında</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- /Navbar -->
    <!-- Full Page Intro -->
    <div class="view" style="background-image: url('img/calculate_01.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
      <!-- Mask & flexbox options-->
      <div class="mask rgba-black-light align-items-center flex-center">
        <!-- Content -->
        <div class="container">
          <!--Grid row-->
          <div class="row">
            <!--Grid column-->
            <div class="col-md-12 mb-4 white-text text-center">
              <h1 class="h1-reponsive white-text mb-0 pt-md-5 pt-5 wow flipInX slow"><strong>İnteraktif Doz Hesaplayıcı</strong></h1>
              <hr class="hr-light my-4 w-75 wow fadeInDown slow">
              <h5 class="mb-4 white-text wow fadeInDown slow"><strong>Hasta için belirli klinik verilere sahipseniz, seçtiğiniz etken madde için doz hesaplamasına başlayabiliriz</strong></h5>
              <a class="btn btn-outline-white wow pulse smooth-scroll" data-wow-delay="2s" href="#activeSubstance">Hazırım, başlayalım</a>
              <!--<a class="btn btn-outline-white wow fadeInDown" data-wow-delay="0.4s">About me</a> -->
            </div>
            <!-- /Grid column -->
          </div>
          <!-- /Grid row -->
        </div>
        <!-- /Content -->
      </div>
      <!-- /Mask & flexbox options-->
    </div>
    <!-- /Full Page Intro -->
  </header>
    
  <!-- Selecting The Active Substance -->
  <div class="view" id="activeSubstance" data-spy="activeSubstance" data-target="#activeSubstance" style="background-image: url('img/calculate_02.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
    <!-- Mask & flexbox options-->
    <div class="mask rgba-stylish-light align-items-center flex-center">
      <!-- Content -->
      <div class="container">
        <div class="row">
          <!--Dropdown primary-->
          <div class="col">          
            <!--Dropdown primary-->            
            <div class="dropdown">          
              <!--Trigger-->
              <a class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="display: block">Etken Madde Seçimi</a>     
              <!--Menu-->
              <div class="dropdown-menu dropdown-primary" id="substanceList">
                <a class="dropdown-item">Ertapenem sodyum - <small>İnvanz</small></a>
                <a class="dropdown-item">İmipenem / Silastatin sodyum - <small>Tienam</small></a>
                <a class="dropdown-item">Meropenem trihidrat - <small>Meronem</small></a>
                <a class="dropdown-item">Siprofloksasin laktat - <small>Ciproktan</small></a>
                <a class="dropdown-item">Levofloksasin - <small>Tavanic</small></a>
                <a class="dropdown-item">Daptomisin - <small>Cubicin</small></a>
                <a class="dropdown-item">Teikoplanin - <small>Targocid</small></a>
                <a class="dropdown-item">Vankomisin hidroklorür - <small>Vancotek</small></a>
                <a class="dropdown-item">Piperasilin sodyum / Tazobaktam sodyum - <small>Tazocin EF</small></a>
                <a class="dropdown-item">Flukonazol - <small>Lumen EF</small></a>
                <a class="dropdown-item">Sefoperazon sodyum / Sulbaktam sodyum - <small>Sulperazon</small></a>
                <a class="dropdown-item">Kolistimetat sodyum - <small>Colimycin</small></a>
                <a class="dropdown-item">Tigesiklin - <small>Tygacil</small></a>
                <a class="dropdown-item">Moksifloksasin hidroklorür - <small>Avelox</small></a>
                <a class="dropdown-item">Linezolit - <small>Zyvoxid</small></a>
                <a class="dropdown-item">Metronidazol - <small>Metronidazol</small></a>
              </div>
            </div>              
          </div>
          <!--/Dropdown primary-->
          <!--Dropdown primary-->
          <div class="col">          
            <!--Dropdown primary-->            
            <div class="dropdown">          
              <!--Trigger-->
              <a class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="display: block">Cockcroft-Gault Denklemi</a>     
              <!--Menu-->
              <div class="dropdown-menu dropdown-info" id="methodlist">
                <a class="dropdown-item2" id="willDisable">Cockcroft-Gault Denklemi</a>
                <a class="dropdown-item2" id="willDisable2">e-GFR Hesaplayıcısı</a>
              </div>
            </div>              
          </div>
          <!--/Dropdown primary-->
        </div>
        <div class="row mt-3">
          <div class="col" style="display:none" id="notNeeded">
            <p class="note note-info wow fadeIn"><strong>Sonuç: </strong>Gözünüz aydın! Bu etken madde için doz ayarlaması yapmanıza gerek yok</p>
          </div>
        </div>
        <div class="row text-center align-items-center" id="cockgaulty">
          <div class="custom-control custom-checkbox mt-3">
            <input type="checkbox" class="custom-control-input" id="diyaliz1">
            <label class="custom-control-label" for="diyaliz1">Hemodiyaliz Alıyor<br><small>(Veri girişi gerekmemektedir)</small></label>
          </div>
          <div class="col">
            <select class="browser-default custom-select" id="gender1">
              <option selected>Cinsiyet</option>
              <option value="1">Erkek</option>
              <option value="2">Kadın</option>
            </select>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="age1" class="form-control" step='1'>
              <label for="form1">Yaş</label>
            </div>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="weight1" class="form-control" step='0.5'>
              <label for="form1">Kilo</label>
            </div>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="srcr1" class="form-control" step='0.01'>
              <label for="form1">Serum kreatinin</label>
            </div>
          </div>
          <div class="col">
            <select class="browser-default custom-select" id="crunit1">
              <option selected>mg/dL</option>
              <option value="2">‎µg/dL</option>
            </select>
          </div>
        </div>
        <div class="row text-center align-items-center" style="display:none" id="egfry">
          <div class="custom-control custom-checkbox mt-3">
            <input type="checkbox" class="custom-control-input" id="diyaliz2">
            <label class="custom-control-label" for="diyaliz2">Hemodiyaliz Alıyor<br><small>(Veri girişi gerekmemektedir)</small></label>
          </div>
          <div class="col">
            <select class="browser-default custom-select" id="gender2">
              <option selected>Cinsiyet</option>
              <option value="1">Erkek</option>
              <option value="2">Kadın</option>
            </select>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="form1" class="form-control" id="age2" step='1'>
              <label for="form1">Yaş</label>
            </div>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="form1" class="form-control" id="srcr2" step='0.01'>
              <label for="form1">Serum kreatinin</label>
            </div>
          </div>
          <div class="col">
            <select class="browser-default custom-select"  id="crunit2">
              <option selected>mg/dL</option>
              <option value="2">‎µg/dL</option>
            </select>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="form1" class="form-control" id="nitrog" step='0.01'>
              <label for="form1">BUN (mg/dL)</label>
            </div>
          </div>
          <div class="col">
            <div class="md-form">
              <input type="number" id="form1" class="form-control"  id="albumin" step='0.01'>
              <label for="form1">Albumin</label>
            </div>
          </div>
          <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="black">
            <label class="custom-control-label" for="black">Siyahi</label>
          </div>
        </div>
        <div class="row text-center align-items-center mt-3">
          <div class="col" id="calculate">
            <button type="button" class="btn btn-cyan btn-lg disabled" id="calcButton" onclick="window.location.href = '#presentResults';">Hesaplayalım</button>
          </div>
        </div>
      <!-- /Content -->
      </div>
    </div>
  </div>  
  <!-- /Selecting The Active Substance -->

  <!-- Presenting The Results -->
  <div class="view" id="presentResults" data-spy="presentResults" data-target="#presentResults" style="background-image: url('img/calculate_03.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
    <!-- Mask & flexbox options-->
    <div class="mask rgba-stylish-light align-items-center flex-center text-center">
      <!-- Content -->
      <h1 class="mx-3" id="resultText" style="color: white; font-weight: bold; letter-spacing: 4px;">Hesaplamanın işleminin başlatılması bekleniyor. <a href="#activeSubstance">Veri girişi</a> bölüme geçelim</h1>
      <!-- Content -->
    </div>
  </div>
  <!-- /Presenting The Results -->

  <!-- /Start your project here-->

  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.js"></script>
  
  <script>
  // Animations init
  new WOW().init();
  </script>

  <script>
  $( ".dropdown-item" ).click(function() {
    let string = $(this).text();
    let index = string.indexOf('-');
    let result = string.substring(0, (index-1));
    $('#dropdownMenu1').text(result);
    
    let needy = document.getElementById("notNeeded");
    let egfry = document.getElementById("egfry");
    let cockgaulty = document.getElementById("cockgaulty");
    let neighbour = $('#dropdownMenu2');
    let disably = document.getElementById("willDisable");
    let disably2 = document.getElementById("willDisable2");
    let calculatey = document.getElementById("calculate");
    let buttony = document.getElementById("calcButton");
    if (result === "Tigesiklin" || result === "Moksifloksasin hidroklorür" || result === "Linezolit" || result === "Metronidazol") {
      needy.style.display = "block";
      egfry.style.display = "none";
      cockgaulty.style.display = "none";
      disably.className = "dropdown-item2 disabled";
      disably2.className = "dropdown-item2 disabled";
      calculatey.style.display = "none";
    } else {
      needy.style.display = "none";
      egfry.style.display = "none";
      cockgaulty.style.display = "flex";
      neighbour.text('Cockcroft-Gault Denklemi');
      disably.className = "dropdown-item2";
      disably2.className = "dropdown-item2";
      calculatey.style.display = "block";
      buttony.className = "btn btn-cyan btn-lg";
    }
  });
  $( ".dropdown-item2" ).click(function() {
    let string = $(this).text();
    
    $('#dropdownMenu2').text(string);
    let egfry = document.getElementById("egfry");
    let cockgaulty = document.getElementById("cockgaulty");
    let texty = $('#dropdownMenu2').text();
    
    if (texty === "e-GFR Hesaplayıcısı") {
      egfry.style.display = "flex";
      cockgaulty.style.display = "none";
    } else if (texty === "Cockcroft-Gault Denklemi") {
      egfry.style.display = "none";
      cockgaulty.style.display = "flex";
    }
  });
  </script>

  <script>
  let method;
  let gender1;
  let age1;
  let weight1;
  let srcr1;
  let crunit1;
  let result1;
  let gender2;
  let age2;
  let srcr2;
  let crunit2;
  let result2;
  let resulty;
  let resultText;
  let actSubs;
  let doseText;

  $('#calcButton').click(() => {
    let method =  $('#dropdownMenu2').text();
    let gender1 = document.getElementById("gender1").value;
    let age1 = parseFloat(document.getElementById("age1").value);
    let weight1 = parseFloat(document.getElementById("weight1").value);
    let srcr1 = parseFloat(document.getElementById("srcr1").value);
    let crunit1 = document.getElementById("crunit1").value;
    let resulty = document.getElementById('resultText');
    let actSubs = document.getElementById('dropdownMenu1').text;

    let gender2 = document.getElementById("gender2").value;
    let age2 = parseFloat(document.getElementById("age2").value);
    let srcr2 = parseFloat(document.getElementById("srcr2").value);
    let crunit2 = document.getElementById("crunit2").value;
    let nitrog = parseFloat(document.getElementById("nitrog").value);    
    let albumin = parseFloat(document.getElementById("albumin").value);
    
    if (crunit1 === "2") {
      srcr1 = srcr1 / 88.4;
    }
    
    if (($("#diyaliz1") || $("#diyaliz2")).is(':checked')) {

      if (actSubs === "Ertapenem sodyum") {
        doseText = "Günde 500 mg. Hemodiyalizden önceki 6 saat içerisinde bu doz verilmişse, seans sonrası 150 mg ek doz önerilir. Verilmemişse ek doza gerek yoktur"
      } else if (actSubs === "Flukonazol") {
        doseText = "Her hemodiyaliz seansından sonra hekimin endikasyona göre belirlemiş olduğu normal doz alınabilir"
      } else if (actSubs === "Kolistimetat sodyum") {
        doseText = "Hemodiyaliz yapılmayan günlerde günlük toplam 3.150.000 IU olarak 12 saatte bir uygulanır. Diyaliz günlerinde toplam 4.500.000 IU doz ikiye bölünür ve ilk yarısı hemodiyalizin son saatinde diğer yarısı hemodiyalizin son saatinde diğer yarısı da bundan 12 saat sonra uygulanır."
      } else if (actSubs === "Meropenem trihidrat") {
        doseText = "Hekimin belirlediği normal dozun hemodiyaliz tedavisinden sonra uygulanması önerilir"
      } else if (actSubs === "Piperasilin sodyum / Tazobaktam sodyum") {
        doseText = "Günde 2 kez 4,5 g. Her bir diyaliz periyodundan sonra 2,25 g takviye dozu uygulanmalıdır"
      } else if (actSubs === "Sefoperazon sodyum / Sulbaktam sodyum") {
        doseText = "Doz ayarlanması gerektiği belirtilmiştir fakat ürün prospektüsünde nasıl yapılacağına ilişkin bir bilgi bulunmamaktadır. İntaniye veya nefroloji uzmanı hekimleri ile görüşülmesi tavsiye olunur."
      } else if (actSubs === "Siprofloksasin laktat") {
        doseText = "Diyaliz sonrasındaki günlük siprofloksasin dozu en fazla 400 mg olmalıdır."
      } else if (actSubs === "Teikoplanin") {
        doseText = "Normal dozun 1/3'ünü uygulayın veya normal dozu 3 günde bir uygulayın. Tedavinin ilk 4 günü doz ayarlamasına gerek yoktur."
      } else {
        doseText = "Bu isimdeki etken madde için herhangi bir diyaliz dozu verisi sağlanmamıştır.";
      }            

      resulty.style = "color: white; font-weight: bold; letter-spacing: 2px;"
      resulty.innerHTML = doseText;

    } else if (method === "Cockcroft-Gault Denklemi") {
        result1 = (((140 - age1) * weight1) / (72 * srcr1)).toFixed(0);
        if (age1 && weight1 && srcr1 && gender1 != "Cinsiyet") {
          if (gender1 === "2") {
            result1 = (result1 * 0.85).toFixed(0);
          }

          if (actSubs === "Ertapenem sodyum") {
            if (result1 > 50) {
              doseText = "Doz ayarlaması gerekmemektedir (Standart günlük doz 1g)";
            } else if (result1 <= 30) {
              doseText = "Günde 500 mg";
            }
          } else if (actSubs === "Flukonazol") {
            if (result1 > 50) {
              doseText = "Doz ayarlaması gerekmemektedir (Endikasyona bağlı olarak günde 50 mg - 400 mg)";
            } else if (result1 <= 50) {
              doseText = "Normal dozun %50'si uygulanır. (Standart doz: Endikasyona bağlı olarak günde 50 mg - 400 mg)"
            }
          } else if (actSubs === "Meropenem trihidrat") {
            if (result1 >= 90) {
              doseText = "Doz ayarlaması gerekmemektedir (Endikasyona bağlı olarak günde 1,5 g - 6 g)";
            } else if (result1 < 90 && result1 >= 50 ) {
              doseText = "8 saatte bir 1 g";
            } else if (result1 < 50 && result1 >= 25) {
              doseText = "12 saatte bir 1 g";
            } else if (result1 < 25 && result1 >= 10) {
              doseText = "12 saatte bir 500 mg";
            } else if (result1 < 10) {
              doseText = "24 saatte bir 500 mg";
            }
          } else if (actSubs === "Piperasilin sodyum / Tazobaktam sodyum") {
            if (result1 > 80) {
              doseText = "Doz ayarlaması gerekmemektedir (Endikasyona bağlı olarak 6 veya 8 saatte bir 4,5 g)";
            } else if (result1 <= 80 && result1 >= 20) {
              doseText = "8 saatte bir 4,5 g";
            } else if (result1 < 20) {
              doseText = "12 saatte bir 4,5 g";
            }
          } else if (actSubs === "Sefoperazon sodyum / Sulbaktam sodyum") {
            if (result1 >= 30) {
              doseText = "Hekimin belirlemiş olduğu normal doz (Endikasyona bağlı olarak 2 etken madde için toplam doz: 3 g - 12 g)";
            } else if (result1 < 30 && result1 >= 15) {
              doseText = "12 saatte bir 3 g (2 etken madde için toplam doz)";
            } else if (result1 < 15) {
              doseText = "12 saatte bir 1,5 g (2 etken madde için toplam doz)";
            }
          } else if (actSubs === "Siprofloksasin laktat") {
            if (result1 >= 60) {
              doseText = "Hekimin belirlemiş olduğu normal doz (Endikasyona bağlı olarak 800 mg - 1200 mg)";
            } else if (result1 < 60 && result1 >= 30) {
              doseText = "Günde maksimum 800 mg olacak şekilde düzenlenir";
            } else if (result1 < 30) {
              doseText = "Günde maksimum 400 mg olacak şekilde düzenlenir";
            }
          } else if (actSubs === "Teikoplanin") {
            if (result1 >= 60) {
              doseText = "Hekimin belirlemiş olduğu normal doz (Endikasyona bağlı olarak 	200, 400 veya 800 mg'lık tek doz)";
            } else if (result1 < 60 && result1 >= 40) {
              doseText = "Normal dozun yarısını uygulayın veya normal dozu 2 günde bir uygulayın. Tedavinin ilk 4 günü doz ayarlamasına gerek yoktur.";
            } else if (result1 < 40) {
              doseText = "Normal dozun 1/3'ünü uygulayın veya normal dozu 3 günde bir uygulayın. Tedavinin ilk 4 günü doz ayarlamasına gerek yoktur.";
            }
          } else {
            doseText = "Bu isimdeki etken madde için herhangi bir yetmezlik dozu verisi sağlanmamıştır."
          }
          
        console.log(`Kr.klirensi = ${result1}`);
        console.log("Hesaplama kısmını hallettik sanırım");      

        resulty.style = "color: white; font-weight: bold; letter-spacing: 2px;"
        resulty.innerHTML = doseText;       

        } else {
        resulty.innerHTML = `Bilgileri eksiksiz girersek, hesaplamaya <a href="#activeSubstance">başlayabiliriz</a>`;
        }
      } else if (method === "e-GFR Hesaplayıcısı") {
        console.log("eGFR metodu henüz yazılmadı")
      }

    console.log(gender1);
    console.log(age1);
    console.log(weight1);
    console.log(srcr1);
    console.log(crunit1);
    
  });
  </script>
  
</body>
</html>